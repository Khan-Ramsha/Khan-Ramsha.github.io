class ThemeToggler{constructor(){this.themes={LIGHT:"light",DARK:"dark"},this.init()}init(){this.bindEvents(),this.setInitialTheme()}bindEvents(){const e=document.getElementById("theme-toggle");e&&e.addEventListener("click",(()=>this.toggleTheme())),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{localStorage.getItem("theme")||this.setTheme(e.matches?this.themes.DARK:this.themes.LIGHT)}))}getCurrentTheme(){const e=localStorage.getItem("theme");return!e||e!==this.themes.LIGHT&&e!==this.themes.DARK?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?this.themes.DARK:this.themes.LIGHT:e}toggleTheme(){const e=this.getCurrentTheme()===this.themes.DARK?this.themes.LIGHT:this.themes.DARK;this.setTheme(e)}setTheme(e){!e||e!==this.themes.LIGHT&&e!==this.themes.DARK||(this.addTransition(),document.documentElement.setAttribute("data-theme",e),this.updateTables(e),this.updateSyntaxHighlighting(e),this.updateGiscus(e),this.updateJupyterNotebooks(e),this.updateMediumZoom(),this.updateToggleButton(e),localStorage.setItem("theme",e),setTimeout((()=>this.removeTransition()),300))}setInitialTheme(){const e=this.getCurrentTheme();this.setTheme(e)}updateTables(e){const t=document.getElementsByTagName("table");for(let s of t)e===this.themes.DARK?s.classList.add("table-dark"):s.classList.remove("table-dark")}updateSyntaxHighlighting(e){const t=document.getElementById("highlight_theme_light"),s=document.getElementById("highlight_theme_dark");t&&s&&(e===this.themes.DARK?(t.media="none",s.media=""):(s.media="none",t.media=""))}updateGiscus(e){const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}updateJupyterNotebooks(e){const t=document.getElementsByClassName("jupyter-notebook-iframe-container");for(let s of t)try{const t=s.getElementsByTagName("iframe")[0].contentWindow.document.body;e===this.themes.DARK?(t.setAttribute("data-jp-theme-light","false"),t.setAttribute("data-jp-theme-name","JupyterLab Dark")):(t.setAttribute("data-jp-theme-light","true"),t.setAttribute("data-jp-theme-name","JupyterLab Light"))}catch(e){}}updateMediumZoom(){if("undefined"!=typeof medium_zoom){const e=getComputedStyle(document.documentElement).getPropertyValue("--global-bg-color");medium_zoom.update({background:e+"ee"})}}updateToggleButton(e){const t=document.getElementById("theme-toggle");if(t){const s=t.querySelector(".fa-moon"),i=t.querySelector(".fa-sun");s&&i&&(e===this.themes.DARK?(s.style.display="none",i.style.display="inline"):(s.style.display="inline",i.style.display="none")),t.title=`Switch to ${e===this.themes.DARK?"light":"dark"} mode`,t.setAttribute("aria-label",`Switch to ${e===this.themes.DARK?"light":"dark"} mode`)}}addTransition(){document.documentElement.classList.add("theme-transition")}removeTransition(){document.documentElement.classList.remove("theme-transition")}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{new ThemeToggler})):new ThemeToggler;